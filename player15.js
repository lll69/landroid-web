(()=>{var t,e={3764(t,e,s){"use strict";const i=[],n=Math.PI,o=Math.abs,a=Math.sqrt;function r(t,e,s,i,n,r){return(n-s)*(n-s)+(r-i)*(r-i)<1e-20?a((t-s)*(t-s)+(e-i)*(e-i)):o((n-s)*(i-e)-(s-t)*(r-i))/a((n-s)*(n-s)+(r-i)*(r-i))}let h=!0;function l(t){h=t}var c=s(963),d=s(7604),p=s(3232),u=s(2079);const g=Math.exp;function f(t,e,s){return t<e?e:t>s?s:t}Math.pow;var m=s(6409),y=s(4104),v=s(7730);const x=Math.PI,w=Math.abs,E=Math.pow,b=Math.sqrt;class P extends m.nB{constructor(t,e,s,i,n="#FFFFFF"){super(),this.atmosphere="",this.description="",this.flora="",this.fauna="",this.explored=!1,this.orbitCenter=t,this.radius=e,this.pos=s,this.speed=i,this.color=n,this.orbitRadius=s.distance(t),this.mass=1*x*e*e*e*2.5}update(t,e){const s=(0,v.Pj)(this.pos,this.orbitCenter);(0,v.eP)(this.velocity,s+x/2,this.speed),super.update(t,e)}postUpdate(t,e){const s=(0,v.Pj)(this.pos,this.orbitCenter);(0,v.eP)(this.pos,s,this.orbitRadius),this.pos.x+=this.orbitCenter.x,this.pos.y+=this.orbitCenter.y,super.postUpdate(t,e)}}const k=Object.freeze([0,1,2,3,4,5,6]),S=Object.freeze(["O","B","A","F","G","K","M"]);class C extends P{constructor(t,e){super(v.ZY.Zero(),e,v.ZY.Zero(),0,function(t){switch(t){case 0:return"#6666FF";case 1:return"#CCCCFF";case 2:return"#EEEEFF";case 3:return"#FFFFFF";case 4:return"#FFFF66";case 5:return"#FFCC33";case 6:return"#FF8800"}}(t)),this.anim=0,this.cls=t,this.mass=1*x*E(e,3)*.5,this.collides=!1}update(t,e){this.anim+=e}}class F extends m.vR{constructor(t,e){super(e),this.latestDiscovery=null,this.planets=[],this.follow=null,this.ringfence=new m.mc(2e5),this.namer=t}initTest(){this.star=new C(2,8e3),this.star.name="TEST SYSTEM";for(let t=0;t<10;t++){const e=t/9,s=(0,u.C)(50,2e3,e),i=(0,u.C)(16e3,15e4,e),n=50*b(i*i*i/this.star.mass),o=2*x*i/n,a=new P(this.star.pos.copy(),s,(0,v.eP)(v.ZY.Zero(),e*x*2,i).addSelf(this.star.pos),o,"#A7A7CA");console.log("Landroid","created planet",a,"with period",n,"and vel",o);const r=t+1;a.description="TEST PLANET #"+r,a.atmosphere="radius="+s,a.flora="mass="+a.mass,a.fauna="speed="+o,this.planets.push(a),this.addEntity(a)}this.planets.sort((t,e)=>t.pos.distance(this.star.pos)-e.pos.distance(this.star.pos)),this.planets.forEach((t,e)=>t.name="TEST SYSTEM "+(e+1)),this.addEntity(this.star),this.ship=new M,(0,v.eP)(this.ship.pos,x/4,16e3).addSelf(this.star.pos),this.ship.angle=0,this.addEntity(this.ship),this.ringfence.add(this.ship),this.addConstraint(this.ringfence),this.follow=this.ship}initRandom(){const t=this.namer.nameSystem(this.rngForInit);this.star=new C((0,y.Ho)(this.rngForInit,k),this.rngForInit.minmax(1e3,8e3)),this.star.name=t;for(let t=0,e=this.rngForInit.minmaxInt(1,11);t<e;t++){const t=this.rngForInit.minmax(50,2e3),e=(0,u.C)(16e3,15e4,this.rngForInit.float()),s=50*b(e*e*e/this.star.mass),i=2*x*e/s,n=new P(this.star.pos,t,(0,v.eP)(v.ZY.Zero(),this.rngForInit.float()*x*2,e).addSelf(this.star.pos),i,"#A7A7CA");console.log("Landroid","created planet",n,"with period",s,"and vel",i),n.description=this.namer.describePlanet(this.rngForInit),n.atmosphere=this.namer.describeAtmo(this.rngForInit),n.flora=this.namer.describeLife(this.rngForInit),n.fauna=this.namer.describeLife(this.rngForInit),this.planets.push(n),this.addEntity(n)}this.planets.sort((t,e)=>t.pos.distance(this.star.pos)-e.pos.distance(this.star.pos)),this.planets.forEach((e,s)=>e.name=t+" "+(s+1)),this.addEntity(this.star),this.ship=new M,(0,v.eP)(this.ship.pos,this.rngForInit.float()*x*2,this.rngForInit.minmax(16e3,15e4)).addSelf(this.star.pos),this.ship.angle=this.rngForInit.float()*x*2,this.addEntity(this.ship),this.ringfence.add(this.ship),this.addConstraint(this.ringfence),this.follow=this.ship}updateAll(t,e){this.ship.transit=!1;const s=e=>{const s=e.pos.distance(this.ship.pos);s<e.radius?e instanceof C&&(this.ship.transit=!0):this.now>this.ship.launchClock+2&&(0,v.HX)(this.ship.velocity,(0,v.Pj)(e.pos,this.ship.pos),.01*t*(this.ship.mass*e.mass)/(s*s))};this.planets.forEach(s),s(this.star),super.updateAll(t,e)}closestPlanet(){const t=Array.from(this.planets);return t.push(this.star),t.map(t=>[t.pos,t]).sort((t,e)=>t[0].distance(this.ship.pos)-e[0].distance(this.ship.pos))[0][1]}closestPlanetForZoom(){const t=Array.from(this.planets);return t.push(this.star),t.map(t=>[t.pos,t]).sort((t,e)=>t[0].distance(this.ship.pos)-1.2*t[1].radius-(e[0].distance(this.ship.pos)-1.2*e[1].radius))[0][1]}solveAll(t,e){if(null===this.ship.landing){const t=this.closestPlanet();if(t.collides){const e=this.ship.pos.distance(t.pos)-this.ship.radius-t.radius,s=(0,v.Pj)(this.ship.pos,t.pos);if(e<0)if(this.ship.velocity.distance(t.velocity),w(this.ship.angle-s)<x/4){const e=new L(this.ship,t,s);this.ship.landing=e,(0,v.N7)(this.ship.velocity,t.velocity),this.addConstraint(e),t.explored=!0,this.latestDiscovery=t}else{const i=(0,v.eP)(v.ZY.Zero(),s,t.radius).addSelf(t.pos);(0,v.eP)(this.ship.pos,s,t.radius+this.ship.radius-e).addSelf(t.pos);for(let t=1;t<=10;t++){const t=new I(this.rng.minmax(.5,2),!1,0,T.DOT,"#FFFFFF",1);(0,v.eP)(t.pos,this.rng.minmax(0,2*x),this.rng.minmax(.1,.5)).addSelf(i),(0,v.N7)(t.opos,t.pos),(0,v.eP)(t.velocity,this.rng.minmax(0,2*x),this.rng.minmax(.1,.5)),t.velocity.x+=.8*this.ship.velocity.x,t.velocity.y+=.8*this.ship.velocity.y,this.addEntity(t)}}}}super.solveAll(t,e)}postUpdateAll(t,e){super.postUpdateAll(t,e),e.forEach(t=>{t.canBeRemoved&&t.canBeRemoved()&&e.delete(t)})}}class L{constructor(t,e,s){this.ship=t,this.planet=e,this.angle=s,this.landingVector=(0,v.eP)(v.ZY.Zero(),s,t.radius+e.radius)}solve(t,e){null!==this.ship&&(this.ship.pos.x=0*this.ship.pos.x+1*(this.planet.pos.x+this.landingVector.x),this.ship.pos.y=0*this.ship.pos.y+1*(this.planet.pos.y+this.landingVector.y),this.ship.angle=this.angle)}}var T;!function(t){t[t.LINE=0]="LINE",t[t.LINE_ABSOLUTE=1]="LINE_ABSOLUTE",t[t.DOT=2]="DOT",t[t.DOT_ABSOLUTE=3]="DOT_ABSOLUTE",t[t.RING=4]="RING"}(T||(T={}));class I extends m.nB{constructor(t,e=!1,s=0,i=T.LINE,n="#888888",o=2){super(),this.lifetime=t,this.collides=e,this.mass=s,this.style=i,this.color=n,this.size=o}update(t,e){super.update(t,e),this.lifetime-=e}canBeRemoved(){return this.lifetime<0}postUpdate(t,e){}}class A{constructor(){this.positions=new p.J(1e4),this.angles=new p.J(1e4)}add(t,e,s){this.positions.size()>=9999&&(this.positions.removeFirst(),this.angles.removeFirst(),this.positions.removeFirst(),this.angles.removeFirst()),this.positions.addLast(new v.ZY(t,e)),this.angles.addLast(s)}}class M extends m.nB{constructor(){super(),this.thrust=v.ZY.Zero(),this.launchClock=0,this.transit=!1,this.track=new A,this.landing=null,this.mass=10,this.radius=12}update(t,e){const s=this.thrust.mag();if(s>0){let i=1e3*e;i*=f(s,0,1),null===this.landing||(0===this.launchClock&&(this.launchClock=t.now+1),t.now>this.launchClock?(t.removeConstraint(this.landing),this.landing=null):i=0),(0,v.HX)(this.velocity,this.angle,i)}else 0!==this.launchClock&&(this.launchClock=0);this.velocity.mag()>5e3&&(0,v.eP)(this.velocity,this.velocity.angle(),5e3),super.update(t,e)}postUpdate(t,e){super.postUpdate(t,e),this.track.add(this.pos.x,this.pos.y,this.angle);const s=this.thrust.mag();if(t.rng.float()<s){const i=new I(t.rng.minmax(.5,1),!0,1,T.RING,"rgba(255,255,255,0.25)",3);(0,v.N7)(i.pos,this.pos),(0,v.N7)(i.opos,this.opos),(0,v.N7)(i.velocity,this.velocity),(0,v.HX)(i.velocity,this.angle+t.rng.minmax(-.2,.2),-1e3*s*10*e),t.addEntity(i)}}}var D=s(9059);class O extends D.m{constructor(){super(...arguments),this.activities=new y.T5(["refueling","sightseeing","vacationing","luncheoning","recharging","taking up space","reticulating space splines","using facilities","spelunking","repairing","herding {fauna}","taming {fauna}","breeding {fauna}","singing lullabies to {fauna}","singing lullabies to {flora}","singing lullabies to the {planet}","gardening {flora}","collecting {flora}","surveying the {planet}","mapping the {planet}","breathing {atmo}","reprocessing {atmo}","bottling {atmo}"]),this.floraGenericPlurals=new y.T5(["flora","plants","flowers","trees","mosses","specimens","life","cells"]),this.faunaGenericPlurals=new y.T5(["fauna","animals","locals","creatures","critters","wildlife","specimens","life","cells"]),this.atmoGenericPlurals=new y.T5(["air","atmosphere","clouds","atmo","gases"]),this.TEMPLATE_REGEX=/{(flora|fauna|planet|atmo)}/}floraPlural(t){return this.floraGenericPlurals.pull(t)}faunaPlural(t){return this.faunaGenericPlurals.pull(t)}atmoPlural(t){return this.atmoGenericPlurals.pull(t)}describeActivity(t,e){return this.activities.pull(t).replace(this.TEMPLATE_REGEX,(s,i)=>{switch(i){case"flora":return(e?e.flora:"SOME")+" "+this.floraPlural(t);case"fauna":return(e?e.fauna:"SOME")+" "+this.faunaPlural(t);case"atmo":return(e?e.atmosphere:"SOME")+" "+this.atmoPlural(t);case"planet":return e?e.description:"SOME BODY";default:return"unknown template tag: "+i}}).toUpperCase()}}const B=Math.PI,N=Math.cos,R=Math.sin;function z(t,e,s,i){const n=new Path2D;n.moveTo(t+s,i);const o=2*B/e;for(let a=1;a<e;a++)n.lineTo(t*N(o*a)+s,t*R(o*a)+i);return n.closePath(),n}function Z(t,e,s){const i=new Path2D,n=2*B/s;i.moveTo(t,0),i.lineTo(e*N(.5*n),e*R(.5*n));for(let o=1;o<s;o++)i.lineTo(t*N(n*o),t*R(n*o)),i.lineTo(e*N(n*(o+.5)),e*R(n*(o+.5)));return i.closePath(),i}const _=t=>new Path2D(t);class Y{constructor(t){this.lifetime=t}update(t){this.lifetime-=t}canBeRemoved(){return this.lifetime<0}}const U=m.nB.prototype.update;class W extends L{constructor(t,e,s,i){super(t,e,s),this.text=i,this.fuse=new Y(900)}solve(t,e){super.solve(t,e),h&&this.fuse.update(e)}canBeRemoved(){return h&&this.fuse.canBeRemoved()}}class j extends M{constructor(){super(...arguments),this.autopilot=null}update(t,e){const s=this.thrust.mag();if(s>0){let i=1e3*e;i*=f(s,0,1),null!==this.landing&&(0===this.launchClock&&(this.launchClock=t.now+1),t.now>this.launchClock?(this.landing.ship=null,this.landing=null):i=0),(0,v.HX)(this.velocity,this.angle,i)}else 0!==this.launchClock&&(this.launchClock=0);this.velocity.mag()>5e3&&(0,v.eP)(this.velocity,this.velocity.angle(),5e3),U.call(this,t,e)}}const G=Math.PI,X=Math.ceil,q=(Math.max,Math.sqrt);class H{constructor(){this.containerDash=[0,0],this.spaceshipPath=_("\nM11.853 0\nC11.853 -4.418 8.374 -8 4.083 -8\nL-5.5 -8\nC-6.328 -8 -7 -7.328 -7 -6.5\nC-7 -5.672 -6.328 -5 -5.5 -5\nL-2.917 -5\nC-1.26 -5 0.083 -3.657 0.083 -2\nL0.083 2\nC0.083 3.657 -1.26 5 -2.917 5\nL-5.5 5\nC-6.328 5 -7 5.672 -7 6.5\nC-7 7.328 -6.328 8 -5.5 8\nL4.083 8\nC8.374 8 11.853 4.418 11.853 0\nZ\n"),this.thrustPath=z(-3,3,-4,0)}drawUniverse(t){t.constraints.forEach(t=>{t instanceof L?this.drawLanding(t):t instanceof m.mc&&this.drawContainer(t)}),this.drawStar(t.star),t.entities.forEach(e=>{e!==t.ship&&e!==t.star&&(e instanceof M?this.drawSpacecraft(e):e instanceof I?this.drawSpark(e):e instanceof P&&this.drawPlanet(e))}),this.drawSpacecraft(t.ship)}drawContainer(t){const e=this.context,s=this.helper,i=this.containerDash;i[0]=i[1]=8/this.zoom,e.setLineDash(i),s.drawCircle("#800000",1/this.zoom,0,0,t.radius),s.clearLineDash()}drawGravitationalField(t){const e=this.helper;for(let s=0;s<8;s++){const i=(0,u.C)(200,.01,s/8),n=q(.01*t.mass*10/i);e.drawCircle("rgba(255,0,0,"+(0,u.C)(.5,.1,s/8)+")",2/this.zoom,t.pos.x,t.pos.y,n)}}drawPlanet(t){this.context;const e=this.helper;e.drawCircle("rgba(0,255,255,0.5)",1/this.zoom,t.orbitCenter.x,t.orbitCenter.y,t.pos.distance(t.orbitCenter)),this.drawGravitationalField(t),e.fillCircle("#16161D",t.pos.x,t.pos.y,t.radius),e.drawCircle(t.color,2/this.zoom,t.pos.x,t.pos.y,t.radius)}drawStar(t){const e=this.context,s=this.helper,i=s.x,n=s.y;s.x-=t.pos.x,s.y-=t.pos.y,e.save(),e.translate(t.pos.x,t.pos.y),s.fillCircle(t.color,0,0,t.radius),this.drawGravitationalField(t),e.save(),e.rotate(t.anim/23*G*2),e.strokeStyle=t.color,e.lineWidth=3/this.zoom,e.lineJoin="round",e.stroke(Z(t.radius+80,t.radius+250,31)),e.restore(),e.rotate(t.anim/-19*G*2),e.strokeStyle=t.color,e.lineWidth=3/this.zoom,e.lineJoin="round",e.stroke(Z(t.radius+20,t.radius+200,32)),e.restore(),s.x=i,s.y=n}drawSpacecraft(t){const e=this.context,s=this.helper,i=s.x,n=s.y;s.x-=t.pos.x,s.y-=t.pos.y,e.save(),e.translate(t.pos.x,t.pos.y),e.rotate(t.angle),e.fillStyle="#16161D",e.fill(this.spaceshipPath),e.strokeStyle=t.transit?"#000000":"#FFFFFF",e.lineWidth=2/this.zoom,e.stroke(this.spaceshipPath),0===t.thrust.x&&0===t.thrust.y||(e.strokeStyle="#FF8800",e.lineJoin="round",e.lineWidth=2/this.zoom,e.stroke(this.thrustPath)),e.restore(),s.x=i,s.y=n,this.drawTrack(t.track)}drawLanding(t){const e=this.context,s=(0,v.eP)(v.ZY.Zero(),t.angle,t.planet.radius).addSelf(t.planet.pos);e.strokeStyle="#FF0000",e.lineWidth=1/this.zoom,e.beginPath(),e.moveTo(s.x-5,s.y-5),e.lineTo(s.x+5,s.y+5),e.stroke(),e.beginPath(),e.moveTo(s.x+5,s.y-5),e.lineTo(s.x-5,s.y+5),e.stroke()}drawSpark(t){if(t.lifetime<0)return;const e=this.context;switch(t.style){case T.LINE:0===t.opos.x&&0===t.opos.y||(e.strokeStyle=t.color,e.lineWidth=t.size,e.beginPath(),e.moveTo(t.opos.x,t.opos.y),e.lineTo(t.pos.x,t.pos.y),e.stroke());break;case T.LINE_ABSOLUTE:0===t.opos.x&&0===t.opos.y||(e.strokeStyle=t.color,e.lineWidth=t.size/this.zoom,e.beginPath(),e.moveTo(t.opos.x,t.opos.y),e.lineTo(t.pos.x,t.pos.y),e.stroke());break;case T.DOT:e.fillStyle=t.color,e.beginPath(),e.arc(t.pos.x,t.pos.y,t.size,0,2*G),e.fill();break;case T.DOT_ABSOLUTE:e.fillStyle=t.color,e.beginPath(),e.arc(t.pos.x/this.zoom,t.pos.y/this.zoom,t.size,0,2*G),e.fill();break;case T.RING:e.strokeStyle=t.color,e.lineWidth=1/this.zoom,e.beginPath(),e.arc(t.pos.x,t.pos.y,t.size,0,2*G),e.stroke()}}drawTrack(t){const e=this.context,s=this.helper;{const i=1/this.zoom;let n,o,a=!1;e.strokeStyle="#00FF00",e.lineWidth=i,t.positions.forEach((t,r)=>{0!==r&&(s.mayDrawLine(i,n,o,t.x,t.y)?(a||(a=!0,e.beginPath(),e.moveTo(n,o)),e.lineTo(t.x,t.y)):a&&(a=!1,e.stroke())),n=t.x,o=t.y}),a&&(a=!1,e.stroke())}}}class V extends F{constructor(t,e){super(t,e),this.triggerDraw=1/0,this.realDt=1/0,console.log("VisibleUniverse Random Seed:",e)}simulateFrame(t){const e=this.triggerDraw,s=t-e;if(0!==s)if(this.triggerDraw=t,this.realDt=s,s>24){const t=X(s/24);for(let i=1;i<=t;i++)this.step(e+s/t*i)}else this.step(t)}}const J=m.vR.prototype.solveAll,$=Math.PI,K=Math.abs,Q=Math.sqrt;class tt extends H{constructor(){super(...arguments),this.spaceshipLegs=_("\nM-7   -6.5\nl-3.5  0\nl-1   -2\nl 0    4\nl 1   -2\nZ\nM-7    6.5\nl-3.5  0\nl-1   -2\nl 0    4\nl 1   -2\nZ\n"),this.thrustPath=z(-3,3,-5,0)}drawUniverse(t){t.constraints.forEach(t=>{t instanceof L?this.drawLanding(t):t instanceof m.mc&&this.drawContainer(t)}),this.drawStar(t.star),t.entities.forEach(e=>{e!==t.star&&(e instanceof I?this.drawSpark(e):e instanceof P&&this.drawPlanet(e))});const e=t.ship,s=e.autopilot;null!==s&&s.enabled&&this.drawAutopilot(s),this.drawSpacecraft(e)}drawSpacecraft(t){const e=this.context,s=this.helper,i=s.x,n=s.y;s.x-=t.pos.x,s.y-=t.pos.y,e.save(),e.translate(t.pos.x,t.pos.y),e.rotate(t.angle),null!==t.landing&&(e.strokeStyle="#CCCCCC",e.lineWidth=2/this.zoom,e.stroke(this.spaceshipLegs)),e.fillStyle="#16161D",e.fill(this.spaceshipPath),e.strokeStyle=t.transit?"#000000":"#FFFFFF",e.lineWidth=2/this.zoom,e.stroke(this.spaceshipPath),0===t.thrust.x&&0===t.thrust.y||(e.strokeStyle="#FF8800",e.lineJoin="round",e.lineWidth=2/this.zoom,e.stroke(this.thrustPath)),e.restore(),s.x=i,s.y=n,this.drawTrack(t.track)}drawLanding(t){if(h){const e=this.context,s=(0,v.eP)(v.ZY.Zero(),t.angle,t.planet.radius).addSelf(t.planet.pos),i=2/this.zoom,n=80;e.save(),e.translate(s.x,s.y),e.rotate(t.angle),e.strokeStyle="#C6FF00",e.lineWidth=i,e.beginPath(),e.moveTo(0,0),e.lineTo(n,0),e.lineTo(.875*n,.25*n),e.lineTo(.75*n,0),e.stroke(),e.restore()}}drawAutopilot(t){if(null!==t.target){const e=t.target,s="rgba(66,133,244,0.5)",i=this.context,n=this.helper,o=this.zoom,a=n.x,r=n.y;n.x-=e.pos.x,n.y-=e.pos.y,i.save(),i.translate(e.pos.x,e.pos.y),i.rotate(2*t.universe.now*$/10),i.strokeStyle=s,i.lineWidth=1/o,function(t,e){t.beginPath(),t.moveTo(e,0);const s=2*B/15;for(let i=1;i<15;i++)t.lineTo(e*N(s*i),e*R(s*i));t.closePath(),t.stroke()}(i,e.radius+t.brakingDistance),i.globalAlpha=.25,n.drawCircle(s,t.landingAltitude,0,0,e.radius+t.landingAltitude/2),i.globalAlpha=1,i.restore(),n.x=a,n.y=r,n.drawLine(s,1/o,t.ship.pos.x,t.ship.pos.y,t.leadingPos.x,t.leadingPos.y),n.drawCircle(s,1/o,t.leadingPos.x,t.leadingPos.y,5/o)}}}class et extends V{initTest(){this.star=new C(2,8e3),this.star.name="TEST SYSTEM";for(let t=0;t<10;t++){const e=t/9,s=(0,u.C)(50,2e3,e),i=(0,u.C)(16e3,15e4,e),n=50*Q(i*i*i/this.star.mass),o=2*$*i/n,a=new P(this.star.pos.copy(),s,(0,v.eP)(v.ZY.Zero(),e*$*2,i).addSelf(this.star.pos),o,"#A7A7CA");console.log("Landroid","created planet",a,"with period",n,"and vel",o);const r=t+1;a.description="TEST PLANET #"+r,a.atmosphere="radius="+s,a.flora="mass="+a.mass,a.fauna="speed="+o,this.planets.push(a),this.addEntity(a)}this.planets.sort((t,e)=>t.pos.distance(this.star.pos)-e.pos.distance(this.star.pos)),this.planets.forEach((t,e)=>t.name="TEST SYSTEM "+(e+1)),this.addEntity(this.star),this.ship=new j,(0,v.eP)(this.ship.pos,$/4,16e3).addSelf(this.star.pos),this.ship.angle=0,this.addEntity(this.ship),this.ringfence.add(this.ship),this.addConstraint(this.ringfence),this.follow=this.ship}initRandom(){const t=this.namer.nameSystem(this.rngForInit);this.star=new C((0,y.Ho)(this.rngForInit,k),this.rngForInit.minmax(1e3,8e3)),this.star.name=t;for(let t=0,e=this.rngForInit.minmaxInt(1,11);t<e;t++){const t=this.rngForInit.minmax(50,2e3),e=(0,u.C)(16e3,15e4,this.rngForInit.float()),s=50*Q(e*e*e/this.star.mass),i=2*$*e/s,n=new P(this.star.pos,t,(0,v.eP)(v.ZY.Zero(),this.rngForInit.float()*$*2,e).addSelf(this.star.pos),i,"#A7A7CA");console.log("Landroid","created planet",n,"with period",s,"and vel",i),n.description=this.namer.describePlanet(this.rngForInit),n.atmosphere=this.namer.describeAtmo(this.rngForInit),n.flora=this.namer.describeLife(this.rngForInit),n.fauna=this.namer.describeLife(this.rngForInit),this.planets.push(n),this.addEntity(n)}this.planets.sort((t,e)=>t.pos.distance(this.star.pos)-e.pos.distance(this.star.pos)),this.planets.forEach((e,s)=>e.name=t+" "+(s+1)),this.addEntity(this.star),this.ship=new j,(0,v.eP)(this.ship.pos,this.rngForInit.float()*$*2,this.rngForInit.minmax(16e3,15e4)).addSelf(this.star.pos),this.ship.angle=this.rngForInit.float()*$*2,this.addEntity(this.ship),this.ringfence.add(this.ship),this.addConstraint(this.ringfence),this.follow=this.ship}solveAll(t,e){if(null===this.ship.landing){const t=this.closestPlanet();if(t.collides){const e=this.ship.pos.distance(t.pos)-this.ship.radius-t.radius,s=(0,v.Pj)(this.ship.pos,t.pos);if(e<0)if(this.ship.velocity.distance(t.velocity),K(this.ship.angle-s)<$/4){const e=new W(this.ship,t,s,this.namer.describeActivity(this.rng,t));this.ship.landing=e,(0,v.N7)(this.ship.velocity,t.velocity),this.addConstraint(e),t.explored=!0,this.latestDiscovery=t}else{const i=(0,v.eP)(v.ZY.Zero(),s,t.radius).addSelf(t.pos);(0,v.eP)(this.ship.pos,s,t.radius+this.ship.radius-e).addSelf(t.pos);for(let t=1;t<=10;t++){const t=new I(this.rng.minmax(.5,2),!1,0,T.DOT,"#FFFFFF",1);(0,v.eP)(t.pos,this.rng.minmax(0,2*$),this.rng.minmax(.1,.5)).addSelf(i),(0,v.N7)(t.opos,t.pos),(0,v.eP)(t.velocity,this.rng.minmax(0,2*$),this.rng.minmax(.1,.5)),t.velocity.x+=.8*this.ship.velocity.x,t.velocity.y+=.8*this.ship.velocity.y,this.addEntity(t)}}}}J.call(this,t,e)}}const st=Math.PI,it=Math.atan2,nt=Math.cos,ot=(Math.floor,Math.max),at=Math.min,rt=(Math.random,Math.sin),ht=Math.sqrt,lt=Math.PI,ct=Math.min,dt=Math.sign,pt=Math.sqrt;class ut{getTelemetry(){return"---- AUTOPILOT ENGAGED ----\nTGT: "+(this.target&&this.target.name?this.target.name:"SELECTING...")+"\nEXE: "+this.strategy+(this.debug.length>0?" ("+this.debug+")":"")}constructor(t,e){this.enabled=!1,this.target=null,this.landingAltitude=0,this.nextStrategyTime=0,this.brakingDistance=0,this.leadingPos=v.ZY.Zero(),this.leadingVector=v.ZY.Zero(),this.rng=c.I,this.strategy="NONE",this.debug="",this.ship=t,this.universe=e}update(t,e){if(!this.enabled)return;if(t.now<this.nextStrategyTime)return;const s=this.strategy;if(null!==this.ship.landing)null!==this.target?(this.strategy="LANDED",this.debug="",this.target=null,this.landingAltitude=0,this.nextStrategyTime=t.now+15):((0,v.eP)(this.ship.thrust,this.ship.angle,1),this.strategy="LAUNCHING",this.debug="",this.nextStrategyTime=t.now+5);else{if(null===this.target&&(this.target=this.universe.planets.sort((t,e)=>this.ship.pos.distance(t.pos)-this.ship.pos.distance(e.pos)).find(t=>!t.explored)||null,this.brakingDistance=0,null===this.target&&(this.target=(0,y.Ho)(this.rng,this.universe.planets))),null!==this.target){const e=this.ship.velocity,s=this.target.velocity,i=this.target.pos.x-this.ship.pos.x,n=this.target.pos.y-this.ship.pos.y,o=pt(i*i+n*n),a=o-this.target.radius;this.landingAltitude=ct(this.target.radius,100);const r=e.x-s.x,h=e.y-s.y,l=(r*i+h*n)/o,c=pt(r*r+h*h)*dt(l),p=0!==c?a/c:1e3,u=5*(c>0?c:1e3);if(this.brakingDistance=function(t,e,s){return t+(e-t)*(1-g(5*-s))}(this.brakingDistance,u,t.dt),(0,v.eP)(this.leadingPos,this.target.velocity.angle(),ct(a/2,this.target.velocity.mag())).addSelf(this.target.pos),this.leadingVector.x=this.leadingPos.x-this.ship.pos.x,this.leadingVector.y=this.leadingPos.y-this.ship.pos.y,a<this.landingAltitude)this.strategy="LANDING",this.ship.angle=(0,v.Pj)(this.ship.pos,this.target.pos),this.ship.thrust.x=this.ship.thrust.y=0;else if(c<0||a>this.brakingDistance)this.strategy="CHASING",this.ship.angle=this.leadingVector.angle(),(0,v.eP)(this.ship.thrust,this.ship.angle,1);else{this.strategy="APPROACHING",this.ship.angle=this.ship.velocity.angle()+lt;const t=c/p/1e3*.9;(0,v.eP)(this.ship.thrust,this.ship.angle,t)}this.debug=(0,d.sprintf)("DV=%.0f D=%.0f T%+.1f",c,a,p)}this.strategy!==s&&(this.nextStrategyTime=t.now+.5)}}postUpdate(t,e){}}let gt=1,ft=5038n;const mt=.00125;let yt=!1,vt=1,xt=1,wt="";const Et=Math.atan2,bt=Math.floor,Pt=Math.max,kt=Math.random,St=Math.sqrt;function Ct(t){return t>=0||-9223372036854775808n===t?t:-t}function Ft(t){return t*window.devicePixelRatio}function Lt(){return xt}function Tt(t){xt=f(t,mt,5)}function It(t){gt=t}const At=[];if("undefined"==typeof BigInt&&At.push("BigInt"),void 0===String.prototype.matchAll&&At.push("String.prototype.matchAll"),At.length>0)throw alert("Your browser does not support the following features: "+At+".\nThe app will exit now."),new Error("Unsupported features: "+At);const Mt=document.getElementById("canvasMain"),Dt=Mt.getContext("2d");let Ot=!1;if(!Dt)throw alert("Unable to get canvas 2d context.\nThe app will exit now."),new Error("Unable to get canvas 2d context");const Bt=new class{constructor(t){this.ctx=t}clearLineDash(){this.ctx.setLineDash(i)}drawCircle(t,e,s,i,o){const r=this.x+this.width/2,h=this.y+this.height/2,l=s-r,c=i-h,d=this.radius;if(a(l*l+c*c)-o-e>d)return;if(a((s-r)*(s-r)+(i-h)*(i-h))+d+e<o)return;const p=this.ctx;p.strokeStyle=t,p.lineWidth=e,p.beginPath(),p.arc(s,i,o,0,2*n),p.stroke()}fillCircle(t,e,s,i){const o=e-(this.x+this.width/2),r=s-(this.y+this.height/2),h=this.radius;if(a(o*o+r*r)-i>h)return;const l=this.ctx;l.fillStyle=t,l.beginPath(),l.arc(e,s,i,0,2*n),l.fill()}mayDrawLine(t,e,s,i,n){return r(this.x+this.width/2,this.y+this.height/2,e,s,i,n)<=this.radius+t}drawLine(t,e,s,i,n,o){if(r(this.x+this.width/2,this.y+this.height/2,s,i,n,o)>this.radius+e)return;const a=this.ctx;a.strokeStyle=t,a.lineWidth=e,a.beginPath(),a.moveTo(s,i),a.lineTo(n,o),a.stroke()}}(Dt),Nt=document.getElementById("rightContainer");let Rt=0;const zt=document.getElementById("zoomSelect");function Zt(){const t=location.hash,e=t?new URLSearchParams(t.substring(1)):new URLSearchParams;switch(Rt=zt.selectedIndex){case 0:e.set("zoom","fixed");break;case 1:e.set("zoom","dynamic");break;case 2:e.set("zoom","manual")}const s=e.toString();location.hash!==s&&(history.replaceState({},"","#"+e.toString()),_t())}function _t(){const t=location.hash,e=t?new URLSearchParams(t.substring(1)):new URLSearchParams,s=e.get("zoom");yt="dynamic"===s,"dynamic"===s&&(Rt=1),Ot="manual"===s,Ot&&(Rt=2),Ot||"dynamic"===s||(Tt(1),Rt=0),zt.removeEventListener("change",Zt),zt.selectedIndex=Rt,zt.addEventListener("change",Zt);const i=e.get("seed");if(i)if("evergreen"===i)It(2);else if("daily"===i)It(1);else try{const t=9223372036854775807n,e=-9223372036854775808n;let s=BigInt(i);s>t&&(s=t),s<e&&(s=e),It(0),function(t){ft=t}(s)}catch(t){console.error(t)}const n=e.get("flag");"true"===n||"1"===n?l(!0):"false"!==n&&"0"!==n||l(!1)}zt.addEventListener("change",Zt),_t(),window.addEventListener("hashchange",_t);const Yt=function(t,e,s,i,n){const o=new et(new O,function(){switch(gt){case 0:return Ct(ft);case 1:return Ct(BigInt(function(){let t=new Date;return 1e4*t.getFullYear()+100*t.getMonth()+t.getDate()}()));default:return Ct((BigInt(c.I.int())<<32n|BigInt(c.I.int()))%10000000n)}}()),a=new tt;o.initRandom(),wt=(0,d.sprintf)("  MASS: %.3e\n",o.star.mass);const r=function(t,e){let s=xt,i=0,n=0;return(o,a)=>{const r=o.canvas.width,h=o.canvas.height;if(o.fillStyle="#16161D",o.fillRect(0,0,r,h),yt){const e=t.closestPlanetForZoom(),i=Pt(0,t.ship.pos.distance(e.pos)-1.2*e.radius);s=f(500/i,mt,5)}else s=xt;{const e=t.follow;null!==e?(i=-e.pos.x,n=-e.pos.y):i=n=0}const l=r/s,c=h/s,d=-i-.5*l,p=-n-.5*c,u=d+l,g=p+c,m=d+l/2,y=p+c/2;let v=1e3;const x=Ft(32);for(;v*s<x;)v*=10;o.save(),o.scale(s,s),o.translate(.5*r/s-m,.5*h/s-y),a.x=d,a.y=p,a.width=l,a.height=c,a.radius=St((l*l+c*c)/4);var w=bt(d/v)*v;for(o.strokeStyle="#292936";w<u;)o.lineWidth=(w%(10*v)==0?3:1.5)/s,o.beginPath(),o.moveTo(w,p),o.lineTo(w,g),o.stroke(),w+=v;for(var E=bt(p/v)*v;E<g;)o.lineWidth=(E%(10*v)==0?3:1.5)/s,o.beginPath(),o.moveTo(d,E),o.lineTo(u,E),o.stroke(),E+=v;e.zoom=s,e.context=o,e.helper=a,e.drawUniverse(t),o.restore()}}(o,a),h=Ft(50),l=Ft(100),p=function(t,e,s,i){let n,o,a,r,h=!1;return{pointerInput:function(t){if(h)if("touchend"===t.type||"touchcancel"===t.type||"pointerup"===t.type||"pointercancel"===t.type||"dblclick"===t.type)h=!1,i(0,0),t.preventDefault();else if("touchmove"===t.type){const e=t.touches[0];a=e.clientX*window.devicePixelRatio,r=e.clientY*window.devicePixelRatio,i(a-n,r-o),t.preventDefault()}else"pointermove"===t.type?(a=t.clientX*window.devicePixelRatio,r=t.clientY*window.devicePixelRatio,i(a-n,r-o),t.preventDefault()):"touchstart"===t.type&&t.touches.length>1&&(h=!1,i(0,0));else if("touchstart"===t.type){if(1===t.touches.length){const e=t.touches[0];n=a=e.clientX*window.devicePixelRatio,o=r=e.clientY*window.devicePixelRatio,h=!0,t.preventDefault()}}else"pointerdown"===t.type?(n=a=t.clientX*window.devicePixelRatio,o=r=t.clientY*window.devicePixelRatio,h=!0,t.preventDefault(),t.target.setPointerCapture(t.pointerId)):"dblclick"===t.type&&(n=a=t.clientX*window.devicePixelRatio,o=r=t.clientY*window.devicePixelRatio,h=!0)},draw:(s,i)=>{if(h){const h=a-n,l=r-o,c=at(e,ht(h*h+l*l)),d=ot(t,c),p=it(l,h);if(s.strokeStyle="#00FF00",s.lineWidth=2,c<t){const t=window.devicePixelRatio;s.setLineDash([t,2*t])}s.beginPath(),s.arc(n,o,d,0,2*st),s.stroke(),i.clearLineDash(),s.beginPath(),s.moveTo(n,o),s.lineTo(n+nt(p)*c,o+rt(p)*c),s.stroke()}}}}(h,l,0,(t,e)=>{if(o.follow instanceof M){const i=o.follow;if(0===t&&0===e)i.thrust.x=0,i.thrust.y=0;else{const n=Et(e,t);i.angle=n;const o=St(t*t+e*e);o<h?(i.thrust.x=0,i.thrust.y=0):(0,v.eP)(i.thrust,n,f((o-(s=h))/(l-s),0,1))}}var s}),u=new ut(o.ship,o),g=p.draw,m=function(t,e,s,i,n,o,a){let r=!1,h=!1,l=-1;const c=document.createTextNode("");s.appendChild(c);const d=document.createTextNode("");i.appendChild(d);const p=document.createTextNode("");a.appendChild(p);let u=0,g=0,f=0,m=0,y=0;return s=>{if(-1===l)return void(l=s);let i=s-l;h||0===t.realDt||(i>=2e3?(o.hidden=!1,o.style.opacity=1,h=!0):i>1e3&&(o.hidden=!1,o.style.opacity=kt()*(s-1e3)/1e3)),r||0===t.realDt||(i>=3e3?(n.hidden=!1,n.style.opacity=String(1),r=!0):i>2e3&&(n.hidden=!1,n.style.opacity=String(kt()*(s-2e3)/1e3))),e.enabled?p.textContent=e.getTelemetry():p.textContent="",s-f>=1e3*vt&&(m=1e3*u/(s-f)*vt,y=u/g,f=s,u=0,g=0),u++,g+=t.dt;const a=t.star,v=t.planets.filter(t=>t.explored).map(t=>"  BODY: "+t.name+"\n  TYPE: "+t.description+"\n  ATMO: "+t.atmosphere+"\n FAUNA: "+t.fauna+"\n FLORA: "+t.flora+"\n"),x="  STAR: "+a.name+" (VIC-"+t.randomSeed%100000n+")\n CLASS: "+S[a.cls]+"\nRADIUS: "+bt(a.radius)+"\n"+wt+"BODIES: "+v.length+" / "+t.planets.length+"\n   FPS: "+(t.realDt*vt===0?"Paused":m.toFixed(1))+"\n  vFPS: "+(t.dt*vt===0?"Paused":y.toFixed(1))+"\n SPEED: "+vt.toFixed(2)+"x\n\n"+v.join("\n");c.textContent=x;const w=t.ship,E=t.closestPlanet(),b=bt(E.pos.distance(w.pos));let P="";null!==w.landing?(P+="LND: "+w.landing.planet.name,P+="\nJOB: "+w.landing.text):b<1e4&&(P+="ALT: "+b),0===w.thrust.x&&0===w.thrust.y||(P.length>0&&(P+="\n"),P+="THR: "+(100*w.thrust.mag()).toFixed(0)+"%"),P.length>0&&(P+="\n"),P+="POS: "+w.pos.str()+"\n",P+="VEL: "+w.velocity.mag().toFixed(0),d.textContent=P}}(o,u,t,e,s,i,n),y=o.ship;return y.autopilot=u,o.addEntity(u),{pointerInput:p.pointerInput,setAutopilot:function(t){u.enabled&&!t&&(y.thrust.x=y.thrust.y=0),u.enabled=t},draw:(t,e,s)=>{o.simulateFrame(t),r(e,s),g(e,s),m(t)}}}(document.getElementById("topText"),document.getElementById("bottomText"),document.getElementById("topContainer"),document.getElementById("bottomContainer"),document.getElementById("autopilotText")),Ut=Yt.pointerInput,Wt=Yt.draw,jt=Yt.setAutopilot;let Gt=null,Xt=-1,qt=1,Ht=0,Vt=0,Jt=!1,$t=!1;function Kt(t){if(!Jt&&-1!==Xt){const e=t-Xt;e>6e4&&(console.warn("Skipped",e,"ms"),Ht+=e)}Xt=t,Jt&&!$t||Wt(qt*(Jt?Vt:t)-Ht,Dt,Bt),$t=!1,Gt=requestAnimationFrame(Kt)}function Qt(){const t=Mt.getBoundingClientRect();Mt.width=Math.round(t.width*window.devicePixelRatio),Mt.height=Math.round(t.height*window.devicePixelRatio),$t=!0}function te(){Mt.addEventListener("touchstart",Ut),Mt.addEventListener("touchmove",Ut),Mt.addEventListener("touchend",Ut),Mt.addEventListener("touchcancel",Ut),Mt.addEventListener("pointerdown",Ut),Mt.addEventListener("pointermove",Ut),Mt.addEventListener("pointerup",Ut),Mt.addEventListener("pointercancel",Ut),Mt.addEventListener("dblclick",Ut)}document.getElementById("loading").hidden=!0,Mt.hidden=!1,te();let ee=!1,se=0,ie=0,ne=-1;function oe(){zt.blur(),clearInterval(ne),Nt.classList.remove("controls-show")}function ae(){Nt.classList.add("controls-show"),clearInterval(ne)}function re(){ae(),ne=setInterval(oe,2e3)}function he(t){if(ee){if("touchstart"===t.type)2!==t.touches.length&&(ee=!1,re());else if("touchend"===t.type||"touchcancel"===t.type)ee=!1,re();else if("touchmove"===t.type){const e=t.touches[1].clientX-t.touches[0].clientX,s=t.touches[1].clientY-t.touches[0].clientY,i=Math.sqrt(e*e+s*s);Ot&&(Tt(se*i/ie),$t=!0),t.preventDefault()}}else if("touchstart"===t.type&&2===t.touches.length){ee=!0;const e=t.touches[1].clientX-t.touches[0].clientX,s=t.touches[1].clientY-t.touches[0].clientY;se=Lt(),ie=Math.sqrt(e*e+s*s),t.preventDefault(),ae()}}Mt.addEventListener("touchstart",he),Mt.addEventListener("touchmove",he),Mt.addEventListener("touchend",he),Mt.addEventListener("touchcancel",he),document.addEventListener("wheel",function(t){Ot&&(Tt(Lt()*(1-t.deltaY/1e3)),$t=!0),re()});const le=document.getElementById("autopilotCheck");le.checked=!1,le.addEventListener("change",function(){jt(le.checked),re()});const ce=document.getElementById("pauseCheck");function de(){ce.checked?(Vt=performance.now(),Jt=!0,Mt.removeEventListener("touchstart",Ut),Mt.removeEventListener("touchmove",Ut),Mt.removeEventListener("touchend",Ut),Mt.removeEventListener("touchcancel",Ut),Mt.removeEventListener("pointerdown",Ut),Mt.removeEventListener("pointermove",Ut),Mt.removeEventListener("pointerup",Ut),Mt.removeEventListener("pointercancel",Ut),Mt.removeEventListener("dblclick",Ut)):(Ht+=qt*(performance.now()-Vt),Jt=!1,te()),re()}ce.checked=!1,ce.addEventListener("change",de),zt.addEventListener("focus",re),zt.addEventListener("blur",re),zt.addEventListener("change",re);const pe=document.getElementById("speedButton");pe.addEventListener("click",function(t){const e=18,s=document.getElementById("speedContainerMask"),i=document.getElementById("speedIntegral"),n=document.getElementById("speedDecimal"),o=document.getElementById("butIntegral"),a=document.getElementById("butDecimal"),r=document.createElement("button"),h=document.createElement("button"),l=document.createElement("button"),c=document.createElement("button"),d=Array(e);let p,u=1,g=0,f=0;function m(e){const s=e/100;g!==s&&(g=s,a.textContent="."+Math.floor(e/10)+e%10,t(u+g,o.textContent+a.textContent))}function y(){r.disabled=f<=0,h.disabled=f+e>32}function v(){s.className="speed-container-hide"}function x(){for(p=0;p<e;p++){const t=d[p];t.textContent=f+p>32?"":String(f+p),t.style.visibility=f+p>32?"hidden":""}}for(p=0;p<e;p++){const e=p;(d[p]=document.createElement("button")).addEventListener("click",()=>{var s;s=e,u!==(s+=f)&&(u=s,o.textContent=String(u),t(u+g,o.textContent+a.textContent))})}for(p=0;p<100;p+=5){const t=document.createElement("button");n.appendChild(t),25===p&&n.appendChild(c),t.textContent="."+Math.floor(p/10)+p%10;const e=p;t.addEventListener("click",()=>{m(e)})}for(p=0;p<6;p++)i.appendChild(d[p]);for(i.appendChild(l),p=6;p<12;p++)i.appendChild(d[p]);for(i.appendChild(r),p=12;p<18;p++)i.appendChild(d[p]);return i.appendChild(h),o.textContent="1",a.textContent=".00",r.textContent="↑",h.textContent="↓",l.textContent=c.textContent="X",r.style.fontWeight=h.style.fontWeight=l.style.fontWeight=c.style.fontWeight=o.style.fontWeight=a.style.fontWeight="bold",l.addEventListener("click",v),r.addEventListener("click",function(){f>0&&(f-=e,y(),x())}),h.addEventListener("click",function(){f+e<=32&&(f+=e,y(),x())}),c.addEventListener("click",v),s.addEventListener("click",v),document.getElementById("speedContainer").addEventListener("click",t=>t.stopPropagation()),i.addEventListener("mouseenter",()=>{o.className="speed-highlight"}),i.addEventListener("mouseleave",()=>{o.className=""}),n.addEventListener("mouseenter",()=>{a.className="speed-highlight"}),n.addEventListener("mouseleave",()=>{a.className=""}),y(),x(),()=>{f=0,y(),x(),s.className="speed-container-show"}}((t,e)=>{if(0===t)return void(ce.checked||(ce.checked=!0,de()));ce.checked&&(ce.checked=!1,de()),pe.textContent=e+"x";const s=qt;qt=t,Ht+=(t-s)*performance.now(),vt=t})),setTimeout(function(){Qt(),new ResizeObserver(Qt).observe(Mt),re(),setTimeout(()=>Gt=requestAnimationFrame(Kt),0)},0)},7604(t,e,s){var i;!function(){"use strict";var n={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(t){return function(t,e){var s,i,a,r,h,l,c,d,p,u=1,g=t.length,f="";for(i=0;i<g;i++)if("string"==typeof t[i])f+=t[i];else if("object"==typeof t[i]){if((r=t[i]).keys)for(s=e[u],a=0;a<r.keys.length;a++){if(null==s)throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',r.keys[a],r.keys[a-1]));s=s[r.keys[a]]}else s=r.param_no?e[r.param_no]:e[u++];if(n.not_type.test(r.type)&&n.not_primitive.test(r.type)&&s instanceof Function&&(s=s()),n.numeric_arg.test(r.type)&&"number"!=typeof s&&isNaN(s))throw new TypeError(o("[sprintf] expecting number but found %T",s));switch(n.number.test(r.type)&&(d=s>=0),r.type){case"b":s=parseInt(s,10).toString(2);break;case"c":s=String.fromCharCode(parseInt(s,10));break;case"d":case"i":s=parseInt(s,10);break;case"j":s=JSON.stringify(s,null,r.width?parseInt(r.width):0);break;case"e":s=r.precision?parseFloat(s).toExponential(r.precision):parseFloat(s).toExponential();break;case"f":s=r.precision?parseFloat(s).toFixed(r.precision):parseFloat(s);break;case"g":s=r.precision?String(Number(s.toPrecision(r.precision))):parseFloat(s);break;case"o":s=(parseInt(s,10)>>>0).toString(8);break;case"s":s=String(s),s=r.precision?s.substring(0,r.precision):s;break;case"t":s=String(!!s),s=r.precision?s.substring(0,r.precision):s;break;case"T":s=Object.prototype.toString.call(s).slice(8,-1).toLowerCase(),s=r.precision?s.substring(0,r.precision):s;break;case"u":s=parseInt(s,10)>>>0;break;case"v":s=s.valueOf(),s=r.precision?s.substring(0,r.precision):s;break;case"x":s=(parseInt(s,10)>>>0).toString(16);break;case"X":s=(parseInt(s,10)>>>0).toString(16).toUpperCase()}n.json.test(r.type)?f+=s:(!n.number.test(r.type)||d&&!r.sign?p="":(p=d?"+":"-",s=s.toString().replace(n.sign,"")),l=r.pad_char?"0"===r.pad_char?"0":r.pad_char.charAt(1):" ",c=r.width-(p+s).length,h=r.width&&c>0?l.repeat(c):"",f+=r.align?p+s+h:"0"===l?p+h+s:h+p+s)}return f}(function(t){if(r[t])return r[t];for(var e,s=t,i=[],o=0;s;){if(null!==(e=n.text.exec(s)))i.push(e[0]);else if(null!==(e=n.modulo.exec(s)))i.push("%");else{if(null===(e=n.placeholder.exec(s)))throw new SyntaxError("[sprintf] unexpected placeholder");if(e[2]){o|=1;var a=[],h=e[2],l=[];if(null===(l=n.key.exec(h)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a.push(l[1]);""!==(h=h.substring(l[0].length));)if(null!==(l=n.key_access.exec(h)))a.push(l[1]);else{if(null===(l=n.index_access.exec(h)))throw new SyntaxError("[sprintf] failed to parse named argument key");a.push(l[1])}e[2]=a}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");i.push({placeholder:e[0],param_no:e[1],keys:e[2],sign:e[3],pad_char:e[4],align:e[5],width:e[6],precision:e[7],type:e[8]})}s=s.substring(e[0].length)}return r[t]=i}(t),arguments)}function a(t,e){return o.apply(null,[t].concat(e||[]))}var r=Object.create(null);e.sprintf=o,e.vsprintf=a,"undefined"!=typeof window&&(window.sprintf=o,window.vsprintf=a,void 0===(i=function(){return{sprintf:o,vsprintf:a}}.call(e,s,e,t))||(t.exports=i))}()},7730(t,e,s){"use strict";s.d(e,{HX:()=>p,N7:()=>l,Pj:()=>c,ZY:()=>h,eP:()=>d});var i=s(7604);const n=Math.atan2,o=Math.cos,a=Math.sin,r=Math.sqrt;class h{constructor(t,e){this.x=t,this.y=e}copy(){return new h(this.x,this.y)}str(){return(0,i.sprintf)("<%+7.0f,%+7.0f>",this.x,this.y)}mag(){const t=this.x,e=this.y;return r(t*t+e*e)}distance(t){const e=this.x-t.x,s=this.y-t.y;return r(e*e+s*s)}angle(){return n(this.y,this.x)}static Zero(){return new h(0,0)}addSelf(t){return this.x+=t.x,this.y+=t.y,this}}function l(t,e){t.x=e.x,t.y=e.y}function c(t,e){return n(t.y-e.y,t.x-e.x)}function d(t,e,s){return t.x=s*o(e),t.y=s*a(e),t}function p(t,e,s){return t.x+=s*o(e),t.y+=s*a(e),t}}},s={};function i(t){var n=s[t];if(void 0!==n)return n.exports;var o=s[t]={exports:{}};return e[t](o,o.exports,i),o.exports}i.m=e,t=[],i.O=(e,s,n,o)=>{if(!s){var a=1/0;for(c=0;c<t.length;c++){for(var[s,n,o]=t[c],r=!0,h=0;h<s.length;h++)(!1&o||a>=o)&&Object.keys(i.O).every(t=>i.O[t](s[h]))?s.splice(h--,1):(r=!1,o<a&&(a=o));if(r){t.splice(c--,1);var l=n();void 0!==l&&(e=l)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[s,n,o]},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={798:0};i.O.j=e=>0===t[e];var e=(e,s)=>{var n,o,[a,r,h]=s,l=0;if(a.some(e=>0!==t[e])){for(n in r)i.o(r,n)&&(i.m[n]=r[n]);if(h)var c=h(i)}for(e&&e(s);l<a.length;l++)o=a[l],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(c)},s=self.webpackChunklandroid_web=self.webpackChunklandroid_web||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var n=i.O(void 0,[36],()=>i(3764));n=i.O(n)})();